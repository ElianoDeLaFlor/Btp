@model IEnumerable<Btp.Models.Postuler>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/Site_Layout.cshtml";
}
@{
    string typeoffre = "Spontanée";
    int Recid = 0;
}
<br />
@*@{

    string style;
    string show;
    if (Model.Count() == 0)
    {
        style = "alert alert-danger centrer";
    }
    else
    {
        style = "alert alert-success centrer";
    }
    if (ViewBag.Search == null)
    {
        show = "none";
    }
    else
    {
        show = "block";
    }
    <p style="display:@show" class="@style">@ViewBag.Search</p>
}*@

@*@using (Html.BeginForm("Index", "Postuler", FormMethod.Get))
{

    <div class="form-group row">
        <div class="input-group mb-2 col-md-8 m-auto">
            @Html.TextBox("searching", null, new { @class = "form-control" })
            <div class="input-group-prepend">
                <input type="submit" value="Recherche" class="btn btn-primary" />&nbsp;
                <input type="button" name="btncancel" id="btncancel" value="Annuler" class="btn btn-primary" />
            </div>
        </div>
    </div>
}*@
<div class="form-group row">
    <div class="input-group mb-2 col-md-8 m-auto">
        @Html.TextBox("Searching", null, new { @class = "form-control", @Placeholder="Recherche"})
    </div>
    </div>
    <table class="table table-hover">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.RecrutementId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PostOccupe)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Nom)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Prenom)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PostTime)
            </th>
            <th>
                <span class="glyphicon glyphicon-download" title="Télécharger"></span>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                @Html.CheckBox("ChkAll", false,new {@title="Tout télécharger" })
            </th>
            <th>
                <span class="glyphicon" title="Supprimer"></span>
            </th>
        </tr>
        @{
            int i = 0;
            string id;
        }
        <tbody id="tblbody">
            @if (ViewBag.Postuler != null)
            {
                List<Btp.Models.Postuler> lst;
                lst = (List<Btp.Models.Postuler>)ViewBag.Postuler;
                foreach (var item in lst)
                {
                    id = "tr" + i;
                    <tr onmouseover="Show('@id')" onmouseout="Hide('@id')">
                        <td>
                            @{
                            Recid = item.RecrutementId;
                            if (Recid == 0)
                            {
                        @typeoffre;
                            }
                            else
                            {
                        @Html.DisplayFor(modelItem => item.RecrutementId);
                            }

                            }
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PostOccupe)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Nom)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Prenom)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PostTime)
                        </td>
                        <td>
                            @Html.CheckBox("chk"+id, false, new { @class="form-control",@title="Téléchargé"})
                        </td>
                        <td>
                            <div id=@id style="display:none">
                                @Html.ActionLink(" ", "Delete", new { id = item.Id }, new { @class = "glyphicon glyphicon-trash",@title="Effacer" })
                            </div>
                        </td>
                    </tr>
                                        i++;
                                    }
                                }
        </tbody>
    </table>
    @section scriptsection{
        <script type="text/javascript">
            $(document).ready(function () {
                $("#Searching").keyup(function () {
                    var txtsearch = $(this).val();
                    $.ajax({
                        type: "post",
                        url: "/Postuler/Recherche?searchtext="+txtsearch,
                        contentType: "html",            
                        success: function (response) {
                            $("#tblbody").html(response);
                        }
                    })
                })
            })
        </script>
        <script>
            function all() {

            }
        </script>
    }
@section startupscript{

    }
